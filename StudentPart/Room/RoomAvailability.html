<link rel="stylesheet" href="Styles/RoomAvailability.css">

<div class="w3-container w3-animate-opacity">
    
    <h2 class="w3-center" style="margin-bottom: 20px;">
        <i class="fas fa-building"></i> Room Availability
    </h2>

    <div class="info-box">
        <p><strong>Current Session:</strong> <span id="sessionDisplay">Detecting...</span></p>
        <p class="w3-small w3-text-grey">Select a date and time below to find available study spaces.</p>
    </div>

    <div class="w3-card-4 w3-white w3-round-large w3-padding" style="margin-bottom: 20px;">
        
        <div class="w3-row-padding">
            <div class="w3-half">
                <label class="w3-text-grey w3-small">Search Room Code</label>
                <div class="w3-input-group">
                    <input type="text" id="searchInput" class="w3-input w3-border w3-round" placeholder="e.g. BK1, N28">
                </div>
            </div>
            <div class="w3-half w3-right-align filter-tags" style="padding-top: 24px;">
                <span class="w3-tag w3-round w3-red active-tag" onclick="filterCategory('All', this)">All</span>
                <span class="w3-tag w3-round w3-light-grey" onclick="filterCategory('Bilik Kuliah', this)">Bilik Kuliah</span>
                <span class="w3-tag w3-round w3-light-grey" onclick="filterCategory('Makmal', this)">Makmal</span>
                <span class="w3-tag w3-round w3-light-grey" onclick="filterCategory('N28', this)">N28</span>
            </div>
        </div>
        
        <hr style="margin: 10px 0;">

        <div class="w3-row-padding">
            <div class="w3-col m4">
                <label class="w3-text-grey w3-small">Date</label>
                <input type="date" id="datePicker" class="w3-input w3-border w3-round">
            </div>
            <div class="w3-col m3">
                <label class="w3-text-grey w3-small">From</label>
                <select id="startTime" class="w3-select w3-border w3-round">
                    <option value="8">08:00 AM</option>
                    <option value="9">09:00 AM</option>
                    <option value="10">10:00 AM</option>
                    <option value="11">11:00 AM</option>
                    <option value="12">12:00 PM</option>
                    <option value="13" selected>01:00 PM</option>
                    <option value="14">02:00 PM</option>
                    <option value="15">03:00 PM</option>
                </select>
            </div>
            <div class="w3-col m3">
                <label class="w3-text-grey w3-small">To</label>
                <select id="endTime" class="w3-select w3-border w3-round">
                    <option value="10">10:00 AM</option>
                    <option value="12">12:00 PM</option>
                    <option value="13">01:00 PM</option>
                    <option value="14">02:00 PM</option>
                    <option value="15">03:00 PM</option>
                    <option value="16" selected>04:00 PM</option>
                    <option value="17">05:00 PM</option>
                </select>
            </div>
            <div class="w3-col m2">
                <label>&nbsp;</label>
                <button class="w3-button w3-block w3-blue w3-round w3-hover-indigo" onclick="generateAvailabilityTable()">
                    <i class="fas fa-search"></i> Search
                </button>
            </div>
        </div>
    </div>

    <div id="loadingMsg" class="loading" style="display:none;">
        <i class="fas fa-spinner fa-spin"></i> Checking live schedule data...
    </div>

    <div class="w3-responsive table-card">
        <table class="w3-table-all w3-hoverable" id="resultsTable">
            <thead>
                <tr class="w3-red"> <th>No.</th>
                    <th>Name</th>
                    <th>Code</th>
                    <th>Category</th>
                    <th>Time</th>
                    <th class="w3-center">Status</th>
                </tr>
            </thead>
            <tbody id="tableBody">
                <tr>
                    <td colspan="6" class="w3-center w3-padding-16 w3-text-grey">
                        Click "Search" to find rooms.
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
    <br>
</div>

<script src="StudentPart/Scripts/RoomAvailability.js"></script>